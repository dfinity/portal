---
keywords: [advanced, bitcoin, btc, ckbtc, chain-key bitcoin]
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import { MarkdownChipRow } from "/src/components/Chip/MarkdownChipRow";

# Using ckBTC in dapps

<MarkdownChipRow labels={["Advanced", "Bitcoin", "Chain-key tokens" ]} />

ckBTC can be integrated into dapps in several ways. Integration may target the dapp developer’s own canisters or the end users of the application. The main options are:
- allowing clients to interact with the ckBTC ledger directly,
- enabling a canister to interact with the ckBTC ledger (for its own use or to manage user funds), and
- supporting Bitcoin ↔ ckBTC conversion for deposits and withdrawals.

## Ledger interaction

The [ckBTC ledger](https://dashboard.internetcomputer.org/canister/mxzaz-hqaaa-aaaar-qaada-cai) implements the [ICRC-1](https://github.com/dfinity/ICRC-1/blob/main/standards/ICRC-1/README.md) and [ICRC-2](https://github.com/dfinity/ICRC-1/blob/main/standards/ICRC-2/README.md) token standards.
This means that integration with the ledger involves calling the standard endpoints for actions such as:

- `icrc1_balance_of` to fetch balances,  
- `icrc1_transfer` to transfer tokens, and
- `icrc2_approve` / `icrc2_transfer_from` for delegated transfers.

There are two primary ways to interact with the ckBTC ledger:

### Client calls (via agent)
A client application (e.g. web application) can use an [agent](/docs/building-apps/interact-with-canisters/agents/overview) to interact directly with the ckBTC ledger canister.

An **agent** is the API client layer used to call ICP canisters. For example, the [ICP JavaScript agent](/docs/building-apps/interact-with-canisters/agents/javascript-agent) can create an actor from the ledger’s [Candid interface](/docs/building-apps/interact-with-canisters/candid/candid-concepts) to invoke its endpoints.

The following libraries simplify creating actors for the ckBTC ledger:

- Rust:
  - [icrc-ledger-agent](https://crates.io/crates/icrc-ledger-agent) Agent for interfacing with ICRC-1/2 ledgers.
  - [icrc-ledger-types](https://crates.io/crates/icrc-ledger-types) Package defining types for interfacing with ICRC-1/2 ledgers.
- JavaScript:
  - [@dfinity/ledger-icrc](https://www.npmjs.com/package/@dfinity/ledger-icrc) Library for interfacing with ICRC-1/2 ledgers.

In this model, all transactions are signed by the user’s [account](/docs/defi/token-standards/#accounts-principals-and-subaccounts).

### Inter-canister calls
A canister can also interact with the ckBTC ledger.

- In some cases, the canister may use ckBTC for its own purposes, such as making payments to other canisters, managing a treasury, or executing automated transfers.
- In other cases, the canister may act on behalf of users, which requires managing user funds. This can be achieved by creating **subaccounts per user** or by **pooling all funds in a single account** and maintaining an internal balance table.

Libraries are available to simplify inter-canister calls:

- Rust:
  - [icrc-ledger-types](https://crates.io/crates/icrc-ledger-types) Package that defines types for interfacing with ICRC-1/2 ledgers.
  - [icrc-ledger-client](https://crates.io/crates/icrc-ledger-client) Package that uses `icrc-ledger-types` and defines functions for interfacing with ICRC-1/2 ledgers.
  - [icrc-ledger-client-cdk](https://crates.io/crates/icrc-ledger-client-cdk) Package that defines runtime meant to be used together with the `icrc-ledger-client` library.
- Motoko:
  - [icrc2-types](https://mops.one/icrc2-types) Package that defines types for interfacing with ICRC-1/2 ledgers.

Example code:
- Rust:
  - [token_transfer](https://github.com/dfinity/examples/tree/master/rust/token_transfer)
  - [token_transfer_from](https://github.com/dfinity/examples/tree/master/rust/token_transfer_from)
- Motoko:
  - [token_transfer](https://github.com/dfinity/examples/tree/master/motoko/token_transfer)
  - [token_transfer_from](https://github.com/dfinity/examples/tree/master/motoko/token_transfer_from)

### Considerations
- The ICRC-1/2 ledgers in many cases implement more interfaces than those defined in ICRC-1 and ICRC-2. For example the Rust libraries provided by DFINITY include additional types and functions for (proposed) standards such as [ICRC-3](https://github.com/dfinity/ICRC-1/tree/main/standards/ICRC-3), [ICRC-21](https://github.com/dfinity/wg-identity-authentication/blob/main/topics/ICRC-21/icrc_21_consent_msg.md), [ICRC-103](https://github.com/dfinity/ICRC/blob/main/ICRCs/ICRC-103/ICRC-103.md) and [ICRC-106](https://github.com/dfinity/ICRC/blob/main/ICRCs/ICRC-106/ICRC-106.md).
- The libraries mentioned above might not always cover all types and interfaces defined in a ledger's [Candid interface](/docs/building-apps/interact-with-canisters/candid/candid-concepts).

## Bitcoin ↔ ckBTC conversion

Beyond ledger interactions, a dapp may also support minting and burning ckBTC by calling the [ckBTC minter canister](https://dashboard.internetcomputer.org/canister/mqygn-kiaaa-aaaar-qaadq-cai).

This can be done in two ways:

- **Client calls (via agent)**
  - Any client can call the ckBTC minter canister directly.
  - TypeScript library: [@dfinity/ckbtc](https://www.npmjs.com/package/@dfinity/ckbtc)

- **Inter-canister calls**
  - A backend canister can call the ckBTC minter canister as part of its logic, either for its own use or on behalf of users.

Check out the [ckBTC API](/docs/references/ckbtc-reference) and learn more about implementing this conversion flow in the [ckBTC best practices](/docs/defi/defi-best-practices).

### Why integrate conversion into a dapp
- Enables deposits from Bitcoin → ckBTC and withdrawals from ckBTC → Bitcoin without leaving the application.
- Reduces friction and improves overall user experience.

**Note:** Applications that integrate with [OISY](https://oisy.com) may rely on OISY to handle Bitcoin ↔ ckBTC conversion on behalf of their users, instead of implementing the conversion themselves.

## Example applications for ckBTC

- [ic-pos](/docs/references/samples/motoko/ic-pos/) An experimental app to demonstrate a real-world use case for ckBTC on the Internet Computer. It is a simple Point of Sale app that allows users to accept ckBTC payments.

## Some applications that integrated ckBTC

- [Bitcoin Gift Cards](https://btc-gift-cards.com).
- [ICLight](https://iclight.io/ICDex/ckBTC/ICP).
- [ICPSwap](https://icpswap.com).
- [KongSwap](https://kongswap.io).
- [Liquidium.fi](https://liquidium.fi).
- [Odin.Fun](https://odin.fun).
- [OpenChat](https://oc.app).
- [Vly Money](https://vly.money).